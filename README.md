# 文件整理智能助手（file-agent）

一个基于大模型的本地文件整理脚本：
- 递归扫描目标目录及子目录文件
- 根据你的自然语言要求生成分类方案
- 支持多轮调整方案（先看方案、再执行）
- 最终执行真实移动，并自动清理空目录

> 适合用于课程资料、实验文件、杂乱文档的半自动整理场景。

---

## 功能特性

- 🤖 **LLM 辅助分类**：通过 GLM-5 生成并迭代文件分类计划
- 🧭 **多轮对话流程**：可持续输入新要求优化方案
- 🔍 **递归扫描**：自动收集目标目录所有层级文件
- 🛡️ **先预览后执行**：先查看计划，确认后再移动
- 🧹 **自动清理**：移动完成后清理空文件夹

---

## 项目结构

```text
file-agent/
├─ file_agent.py        # 主程序
├─ api_key.txt          # 本地 API Key（请勿提交到公开仓库）
├─ test_folder/         # 待整理目录
└─ README.md
```

---

## 环境要求

- Python 3.8+
- 依赖：`openai`

安装依赖：

```bash
pip install openai
```

---

## 配置

程序会从项目根目录读取 `api_key.txt`：

```text
./api_key.txt
```

文件内容示例（仅一行）：

```text
YOUR_API_KEY
```

`file_agent.py` 中默认配置：
- `API_KEY_FILE = "./api_key.txt"`
- `TARGET_FOLDER = "./test_folder"`

可按需修改 `TARGET_FOLDER` 为你的目标目录。

---

## 使用方式

在项目根目录运行：

```bash
python file_agent.py
```

启动后流程：
1. 自动扫描 `TARGET_FOLDER` 下所有文件
2. 生成初始分类方案并展示
3. 你可继续输入自然语言要求调整方案
4. 输入命令执行或退出

交互命令：
- `/show`：查看当前方案
- `/run`：执行移动
- `/exit`：取消并退出（不移动）

---

## 示例对话（简化）

```text
你: 按课程名称分类
你: 把仿真实验相关文件放到“仿真实验”
你: /show
你: /run
```

---

## 安全与开源注意事项

- **不要在公开仓库提交真实密钥**。
- 建议将 `api_key.txt` 加入 `.gitignore`。
- 若密钥曾泄露，请立即在平台后台重置（Rotate）密钥。

---

## 可改进方向

- 增加“仅模拟执行（dry-run）”模式
- 处理重名文件冲突策略（重命名/跳过/覆盖可选）
- 增加日志输出与回滚能力
- 支持配置文件（如 `config.json`）

---

## 许可证

本项目采用 MIT License，详见 LICENSE 文件。
